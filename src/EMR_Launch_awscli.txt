
===== ON DEMAND  ============

aws emr create-cluster \
--auto-scaling-role EMR_AutoScaling_DefaultRole \
--termination-protected \
--applications Name=Hadoop Name=Hive Name=Ganglia Name=Spark \
--bootstrap-actions '[{"Path":"s3://wallaceprintzs3v2/bootstrap-emr.sh","Name":"Custom action"}]' \
--ec2-attributes '{"KeyName":"wp_ec2_key","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-d8709d83","EmrManagedSlaveSecurityGroup":"sg-4de5a336","EmrManagedMasterSecurityGroup":"sg-63eea818"}' \
--service-role EMR_DefaultRole \
--enable-debugging \
--release-label emr-5.6.0 \
--log-uri 's3n://aws-logs-486713137408-us-west-2/elasticmapreduce/' \
--name 'Cluster3' \
--instance-groups '[{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":64,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"MASTER","InstanceType":"m3.xlarge","Name":"Master - 1"},{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":64,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"CORE","InstanceType":"r4.8xlarge","Name":"Core - 2"}]' \
--scale-down-behavior TERMINATE_AT_INSTANCE_HOUR \
--region us-west-2



========== WITH SPOT PRICE ============

aws emr create-cluster \
--auto-scaling-role EMR_AutoScaling_DefaultRole \
--termination-protected \
--applications Name=Hadoop Name=Hive Name=Spark Name=Ganglia \
--bootstrap-actions '[{"Path":"s3://wallaceprintzs3v2/bootstrap-emr.sh","Name":"Custom action"}]' \
--ec2-attributes '{"KeyName":"wp_ec2_key","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-d8709d83","EmrManagedSlaveSecurityGroup":"sg-4de5a336","EmrManagedMasterSecurityGroup":"sg-63eea818"}' \
--service-role EMR_DefaultRole --enable-debugging --release-label emr-5.6.0 \
--log-uri 's3n://aws-logs-486713137408-us-west-2/elasticmapreduce/' \
--name 'Cluster5' \
--instance-groups '[{"InstanceCount":4,"BidPrice":"1","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"CORE","InstanceType":"r4.4xlarge","Name":"Core - 2"},{"InstanceCount":1,"BidPrice":"0.5","InstanceGroupType":"MASTER","InstanceType":"m3.xlarge","Name":"Master - 1"}]' \
--scale-down-behavior TERMINATE_AT_INSTANCE_HOUR \
--region us-west-2
